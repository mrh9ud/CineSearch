{"ast":null,"code":"import { FETCHED_RECOMMENDED_MOVIES, LOADING, FETCHED_SEARCHED_MOVIES, LOGIN_USER } from './actionType';\nconst movieRecURL = 'http://localhost:3000/movies';\nconst movieSearchURL = 'http://localhost:3000/search';\nconst userCreationURL = 'http://localhost:3000/users';\nconst userLoginURL = 'http://localhost:3000/login';\n\nfunction fetchedRecommendedMovies(recommendedMoviesArray) {\n  return {\n    type: FETCHED_RECOMMENDED_MOVIES,\n    payload: recommendedMoviesArray\n  };\n}\n\nfunction fetchedSearchedMovies(searchedMoviesArray) {\n  return {\n    type: FETCHED_SEARCHED_MOVIES,\n    payload: searchedMoviesArray\n  };\n}\n\nfunction loading() {\n  return {\n    type: LOADING\n  };\n}\n\nfunction loginUser(userObj) {\n  return {\n    type: LOGIN_USER,\n    payload: userObj\n  };\n} //Creates and login New User\n\n\nfunction createNewUser(userObj) {\n  return dispatch => {\n    let userConfigObj = {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify(userObj)\n    };\n    dispatch(loading());\n    fetch(userCreationURL, userConfigObj).then(res => res.json()).then(data => {\n      dispatch(loginUser(data));\n    });\n  };\n} //Verify and login Existing User\n\n\nfunction verifyUser(userObj) {\n  return dispatch => {\n    let userConfigObj = {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify(userObj)\n    };\n    dispatch(loading());\n    fetch(userLoginURL, userConfigObj).then(res => res.json()).then(data => {\n      if (!data.error) {\n        dispatch(loginUser(data));\n      } else {\n        alert(data.message);\n      }\n    });\n  };\n}\n\nfetch('http://localhost:3000/api/v1/login', userConfig).then(res => res.json()).then(apiResponse => {\n  if (!apiResponse.error) {\n    console.log(apiResponse.jwt);\n    localStorage.setItem(\"token\", apiResponse.jwt);\n    this.setState({\n      currentUser: JSON.parse(apiResponse.currentUser)\n    });\n  } else {\n    alert(apiResponse.message);\n  }\n}); //fetches recommended movies on page load\n\nfunction fetchingRecommendedMovies() {\n  return dispatch => {\n    dispatch(loading());\n    fetch(movieRecURL).then(res => res.json()).then(recommendedMoviesArray => {\n      dispatch(fetchedRecommendedMovies(recommendedMoviesArray));\n    });\n  };\n} //fetches movie upon user search\n\n\nfunction fetchingSearchedMovies(searchTerm) {\n  const configObj = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\"\n    },\n    body: JSON.stringify({\n      searchTerm\n    })\n  };\n  return dispatch => {\n    dispatch(loading());\n    fetch(movieSearchURL, configObj).then(res => res.json()).then(searchedMoviesArray => {\n      dispatch(fetchedSearchedMovies(searchedMoviesArray));\n    });\n  };\n}\n\nexport { fetchingRecommendedMovies, fetchingSearchedMovies, createNewUser, verifyUser };","map":{"version":3,"sources":["/Users/flatironschool/Documents/mod5/CineSearch/frontend/src/redux/actionCreators.js"],"names":["FETCHED_RECOMMENDED_MOVIES","LOADING","FETCHED_SEARCHED_MOVIES","LOGIN_USER","movieRecURL","movieSearchURL","userCreationURL","userLoginURL","fetchedRecommendedMovies","recommendedMoviesArray","type","payload","fetchedSearchedMovies","searchedMoviesArray","loading","loginUser","userObj","createNewUser","dispatch","userConfigObj","method","headers","body","JSON","stringify","fetch","then","res","json","data","verifyUser","error","alert","message","userConfig","apiResponse","console","log","jwt","localStorage","setItem","setState","currentUser","parse","fetchingRecommendedMovies","fetchingSearchedMovies","searchTerm","configObj"],"mappings":"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","sourcesContent":["import { FETCHED_RECOMMENDED_MOVIES, LOADING, FETCHED_SEARCHED_MOVIES, LOGIN_USER } from './actionType'\n\nconst movieRecURL = 'http://localhost:3000/movies'\nconst movieSearchURL ='http://localhost:3000/search'\nconst userCreationURL = 'http://localhost:3000/users'\nconst userLoginURL = 'http://localhost:3000/login'\n\nfunction fetchedRecommendedMovies(recommendedMoviesArray) {\n    return { type: FETCHED_RECOMMENDED_MOVIES, payload: recommendedMoviesArray }\n}\n\nfunction fetchedSearchedMovies(searchedMoviesArray) {\n    return { type: FETCHED_SEARCHED_MOVIES, payload: searchedMoviesArray }\n}\n\nfunction loading() {\n    return {type: LOADING}\n}\n\nfunction loginUser(userObj) {\n    return { type: LOGIN_USER, payload: userObj}\n}\n\n//Creates and login New User\nfunction createNewUser(userObj) {\n    return dispatch => {\n        let userConfigObj = {\n            method: 'POST',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": 'application/json'\n            },\n            body: JSON.stringify(userObj)\n        }\n        dispatch(loading())\n        fetch(userCreationURL, userConfigObj)\n        .then(res => res.json())\n        .then(data => {\n            dispatch(loginUser(data))\n        })\n    }\n}\n\n//Verify and login Existing User\nfunction verifyUser(userObj) {\n    return dispatch => {\n        let userConfigObj = {\n            method: 'POST',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": 'application/json'\n            },\n            body: JSON.stringify(userObj)\n        }\n        dispatch(loading())\n        fetch(userLoginURL, userConfigObj)\n        .then(res => res.json())\n        .then(data => {\n            if (!data.error) {\n                dispatch(loginUser(data))\n            } else {\n                alert(data.message)\n            }\n        })\n    }\n}\n\nfetch('http://localhost:3000/api/v1/login', userConfig)\n\t\t\t.then(res => res.json())\n\t\t\t.then(apiResponse => {\n\t\t\t\tif (!apiResponse.error) {\n\t\t\t\t\tconsole.log(apiResponse.jwt)\n\t\t\t\t\tlocalStorage.setItem(\"token\", apiResponse.jwt)\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrentUser: JSON.parse(apiResponse.currentUser)\n\t\t\t\t})} else {\n\t\t\t\t\talert(apiResponse.message)\n\t\t\t\t}\n\t\t\t})\n\n//fetches recommended movies on page load\nfunction fetchingRecommendedMovies() {\n    return (dispatch) => {\n        dispatch(loading())\n        fetch(movieRecURL)\n        .then(res => res.json())\n        .then(recommendedMoviesArray => {\n            dispatch(fetchedRecommendedMovies(recommendedMoviesArray))\n        })\n    }\n}\n\n//fetches movie upon user search\nfunction fetchingSearchedMovies(searchTerm) {\n    const configObj = {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n            searchTerm\n        })\n    }\n    return (dispatch) => {\n        dispatch(loading())\n        fetch(movieSearchURL, configObj)\n        .then(res => res.json())\n        .then(searchedMoviesArray => {\n            dispatch(fetchedSearchedMovies(searchedMoviesArray))\n        })\n    }\n}\n\nexport { fetchingRecommendedMovies, fetchingSearchedMovies, createNewUser, verifyUser }"]},"metadata":{},"sourceType":"module"}